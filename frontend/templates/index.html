{% load static %}
<!doctype html>
<html lang="pt-BR">
  <head>
    {% load static %}
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cini English | Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="{% static 'styles.css' %}" />
    

  </head>
  <body>
    <div class="app-shell">
      <aside class="sidebar">
        <div class="brand">
          <div class="brand-icon">üå±</div>
          <div>
            <p class="brand-kicker">Dashboard</p>
            <p class="brand-name">Cini English</p>
          </div>
        </div>
        <nav class="nav">
          <button class="nav-item active" data-view="view-calendar">
            <span class="nav-emoji">üìÖ</span>
            <div>
              <p class="nav-title">Calend√°rio</p>
              <p class="nav-subtitle">Agenda visual do m√™s</p>
            </div>
          </button>
          <button class="nav-item" data-view="view-students">
            <span class="nav-emoji">üßë‚Äçüéì</span>
            <div>
              <p class="nav-title">Alunos</p>
              <p class="nav-subtitle">Cadastro e planos</p>
            </div>
          </button>
          <button class="nav-item" data-view="view-billing">
            <span class="nav-emoji">üí¨</span>
            <div>
              <p class="nav-title">Cobran√ßa</p>
              <p class="nav-subtitle">WhatsApp + Pix</p>
            </div>
          </button>
          <button class="nav-item" data-view="view-tasks">
            <span class="nav-emoji">‚úÖ</span>
            <div>
              <p class="nav-title">Tarefas</p>
              <p class="nav-subtitle">Planejamento r√°pido</p>
            </div>
          </button>
          <button class="nav-item" data-view="view-finance">
            <span class="nav-emoji">üí∞</span>
            <div>
              <p class="nav-title">Financeiro</p>
              <p class="nav-subtitle">Recebimentos do m√™s</p>
            </div>
          </button>

        </nav>
        <div class="sidebar-card">
          <p class="sidebar-title">Vis√£o r√°pida</p>
          <ul class="sidebar-highlights">
            <li><strong id="sidebarConfirmed">0</strong> aulas confirmadas</li>
            <li><strong id="sidebarPending">0</strong> pend√™ncias</li>
            <li><strong id="sidebarStudents">0</strong> alunos ativos</li>
          </ul>
          <button class="primary ghost" id="createLessonBtn">+ Novo agendamento</button>
        </div>
      </aside>

      <main class="main">
        <section class="view active" id="view-calendar">
          <header class="topbar">
            <div>
              <p class="eyebrow">Calend√°rio</p>
              <h1>Central da professora</h1>
              <p class="muted">
                Organize sua agenda do m√™s, confirme/cancele aulas e registre observa√ß√µes por dia.
              </p>
            </div>
            <div class="top-actions">
              <button class="primary ghost" id="monthBack">M√™s anterior</button>
              <button class="primary" id="monthForward">Pr√≥ximo m√™s</button>
            </div>
          </header>

          <section class="grid stats" id="calendar">
            <div class="card stat">
              <div class="stat-icon confirmed">‚úî</div>
              <div>
                <p class="stat-label">Aulas confirmadas</p>
                <p class="stat-value" id="statConfirmed">0</p>
              </div>
            </div>
            <div class="card stat">
              <div class="stat-icon pending">‚Ä¢</div>
              <div>
                <p class="stat-label">Pendentes</p>
                <p class="stat-value" id="statPending">0</p>
              </div>
            </div>
            <div class="card stat">
              <div class="stat-icon canceled">‚úñ</div>
              <div>
                <p class="stat-label">Canceladas</p>
                <p class="stat-value" id="statCanceled">0</p>
              </div>
            </div>
            <div class="card stat">
              <div class="stat-icon students">‚òÖ</div>
              <div>
                <p class="stat-label">Alunos ativos</p>
                <p class="stat-value" id="statStudents">0</p>
              </div>
            </div>
          </section>

          <section class="card calendar-card">
            <div class="section-header">
              <div>
                <p class="eyebrow">Calend√°rio</p>
                <h2 id="monthTitle">M√™s</h2>
                <p class="muted">Clique em um dia para ver e editar os agendamentos.</p>
              </div>
              <div class="legend">
                <span class="badge confirmed">Confirmado</span>
                <span class="badge pending">Pendente</span>
                <span class="badge canceled">Cancelado</span>
              </div>
            </div>

            <!-- NOVO: cabe√ßalho dos dias da semana -->
            <div class="calendar-weekdays">
              <span class="weekday-pill">DOM</span>
              <span class="weekday-pill">SEG</span>
              <span class="weekday-pill">TER</span>
              <span class="weekday-pill">QUA</span>
              <span class="weekday-pill">QUI</span>
              <span class="weekday-pill">SEX</span>
              <span class="weekday-pill">S√ÅB</span>
            </div>

            <div class="calendar-grid" id="calendarGrid"></div>
          </section>


          <section class="grid columns">
            <div class="card detail-card" id="dayDetails">
              <div class="section-header">
                <div>
                  <p class="eyebrow">Dia selecionado</p>
                  <h3 id="selectedDateTitle">Selecione um dia</h3>
                  <p class="muted">
                    Veja detalhes e registre novas aulas.
                  </p>
                </div>
              </div>
              <div id="dayNotes"></div>

              <form id="noteForm" class="form">
                <div class="form-row">
                  <label for="noteTitle">Anota√ß√£o</label>
                  <input
                    type="text"
                    id="noteTitle"
                    name="noteTitle"
                    placeholder="Ex.: Aula Matheus - 15h00"
                    required
                  />
                </div>

                <div class="form-row grid-two">
                  <div>
                    <label for="noteStudent">Aluno</label>
                    <select id="noteStudent" name="noteStudent"></select>
                  </div>
                  <div>
                    <label for="noteTime">Hor√°rio</label>
                    <input type="time" id="noteTime" name="noteTime" />
                  </div>
                </div>

                <div class="form-row">
                  <label for="noteStatus">Status</label>
                  <select id="noteStatus" name="noteStatus">
                    <option value="confirmed">Confirmado</option>
                    <option value="pending">Pendente</option>
                    <option value="canceled">Cancelado</option>
                  </select>
                </div>

                <div class="form-row">
                  <label for="noteInfo">Observa√ß√µes</label>
                  <textarea
                    id="noteInfo"
                    name="noteInfo"
                    rows="2"
                    placeholder="Material, link da aula, reembolso etc."
                  ></textarea>
                </div>

                <button class="primary" type="submit">Salvar anota√ß√£o</button>
              </form>

            </div>
          </section>
        </section>

        <section class="view" id="view-students">
          <header class="topbar">
            <div>
              <p class="eyebrow">Alunos</p>
              <h1>Planos e progresso</h1>
              <p class="muted">Visualize contatos, respons√°veis, planos e aulas restantes.</p>
            </div>
            <button class="primary" id="addStudent">+ Novo aluno</button>
          </header>

          <section class="card detail-card">
            <div class="section-header">
              <div>
                <p class="eyebrow">Lista de alunos</p>
                <h3>Cadastro e status</h3>
                <p class="muted">Ajuste rapidamente dados e acompanhe aulas restantes.</p>
              </div>
            </div>
            <div id="studentList" class="student-list"></div>
          </section>
        </section>

        <section class="view" id="view-billing">
          <header class="topbar">
            <div>
              <p class="eyebrow">Cobran√ßa</p>
              <h1>Mensagem pronta para WhatsApp</h1>
              <p class="muted">Personalize e envie em um clique para o WhatsApp do aluno.</p>
            </div>
            <div class="top-actions">
              <button class="primary ghost" id="copyBilling">Copiar mensagem</button>
              <button class="primary" id="openBillingWhatsApp">Abrir no WhatsApp</button>
            </div>
          </header>


          <section class="card detail-card" id="billing">
            <form class="form billing-form" id="billingForm">
              <div class="form-row">
                <label for="billingStudent">Aluno</label>
                <select id="billingStudent" name="billingStudent"></select>
              </div>
              <div class="form-row">
                <label for="billingPlan">Plano atual</label>
                <input type="text" id="billingPlan" name="billingPlan" required />
              </div>
              <div class="form-row">
                <label for="billingInstallments">Parcelamento</label>
                <input
                  type="text"
                  id="billingInstallments"
                  name="billingInstallments"
                  placeholder="Ex.: 3x de R$ 320"
                />
              </div>
              <div class="form-row">
                <label for="billingValue">Valor R$:</label>
                <input
                  type="text"
                  id="billingValue"
                  name="billingValue"
                  placeholder="Ex.: R$ 960,00"
                />
              </div>
              <div class="form-row grid-two">
                <div>
                  <label for="billingDelivered">Aulas ministradas</label>
                  <input type="number" id="billingDelivered" min="0" />
                </div>
                <div>
                  <label for="billingTotal">Aulas do pacote</label>
                  <input type="number" id="billingTotal" min="1" />
                </div>
              </div>
              <div class="form-row">
                <label for="billingPix">Chave Pix</label>
                <input type="text" id="billingPix" name="billingPix" placeholder="cini@pix.com" />
              </div>
            </form>
            <div class="billing-preview" id="billingPreview"></div>
          </section>
        </section>

        <section class="view" id="view-tasks">
          <header class="topbar">
            <div>
              <p class="eyebrow">Tarefas</p>
              <h1>Planejamento r√°pido</h1>
              <p class="muted">
                Use para lembrar materiais, conte√∫dos de aula e pend√™ncias administrativas.
              </p>
            </div>
            <button class="primary ghost" id="addTask">Nova tarefa</button>
          </header>

          <section class="card detail-card" id="tasks">
            <div class="task-list" id="taskList"></div>
          </section>
        </section>
        <section class="view" id="view-finance">
  <header class="topbar">
    <div>
      <p class="eyebrow">Financeiro</p>
      <h1>Vis√£o de recebimentos</h1>
      <p class="muted">
        Veja quanto falta receber de cada aluno neste m√™s e marque como pago, pendente ou vencido.
      </p>
    </div>
  </header>

  <section class="card detail-card">
    <div class="section-header">
      <div>
        <p class="eyebrow">M√™s de refer√™ncia</p>
        <h3 id="financeMonthTitle">M√™s</h3>
        <p class="muted">As cobran√ßas acompanham o mesmo m√™s do calend√°rio.</p>
      </div>
    </div>
            <p class="finance-total">
          Total a receber neste m√™s:
          <strong id="financeTotalAmount">R$ 0,00</strong>
        </p>

    <div class="finance-table" id="financeList"></div>
  </section>
</section>

      </main>
    </div>

    <script src="{% static 'script.js' %}"></script>



  </body>
</html>